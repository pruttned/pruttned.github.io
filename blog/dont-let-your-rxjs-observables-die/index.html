<!DOCTYPE html><html lang="en" prefix="og: http://ogp.me/ns#"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:112.5%/1.666 'Roboto',sans-serif;box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.8);font-family:'Roboto',sans-serif;font-weight:normal;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;}h1{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0;color:inherit;font-family:'Roboto',sans-serif;font-weight:bold;text-rendering:optimizeLegibility;font-size:2rem;line-height:1.1;}h2{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;color:inherit;font-family:'Roboto',sans-serif;font-weight:bold;text-rendering:optimizeLegibility;font-size:1.51572rem;line-height:1.1;}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;color:inherit;font-family:'Roboto',sans-serif;font-weight:bold;text-rendering:optimizeLegibility;font-size:1.31951rem;line-height:1.1;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;color:inherit;font-family:'Roboto',sans-serif;font-weight:bold;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;color:inherit;font-family:'Roboto',sans-serif;font-weight:bold;text-rendering:optimizeLegibility;font-size:0.87055rem;line-height:1.1;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;color:inherit;font-family:'Roboto',sans-serif;font-weight:bold;text-rendering:optimizeLegibility;font-size:0.81225rem;line-height:1.1;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;}ul{margin-left:1.666rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;list-style-position:outside;list-style-image:none;}ol{margin-left:1.666rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;font-size:0.85rem;line-height:1.666rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;font-size:1rem;line-height:1.666rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;}blockquote{margin-left:1.666rem;margin-right:1.666rem;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.666rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;}b{font-weight:bold;}strong{font-weight:bold;}dt{font-weight:bold;}th{font-weight:bold;}li{margin-bottom:0.333rem;}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.666rem;margin-bottom:calc(1.666rem / 2);margin-top:calc(1.666rem / 2);}li > ul{margin-left:1.666rem;margin-bottom:calc(1.666rem / 2);margin-top:calc(1.666rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(1.666rem / 2);}code{font-size:0.85rem;line-height:1.666rem;}kbd{font-size:0.85rem;line-height:1.666rem;}samp{font-size:0.85rem;line-height:1.666rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:1.11067rem;padding-right:1.11067rem;padding-top:0.833rem;padding-bottom:calc(0.833rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}h2,h3,h4{margin-bottom:0.6rem;}a,a:visited{color:#329BEB;text-decoration:none;}a:hover,a:active{color:#329BEB;text-decoration:underline;}figcaption{color:#A2B4C0;margin-top:2px;text-align:center;font-size:0.6em;}figcaption a,figure a:visited{color:currentColor;text-decoration:underline;}figcaption a:hover,figure a:active{color:currentColor;text-decoration:underline;}</style><style data-href="/styles.246d67a4ef7e9adeefa5.css">code[class*=language-],pre[class*=language-]{color:#f8f8f2;background:none;text-shadow:0 1px rgba(0,0,0,.3);font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;border-radius:.3em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#272822}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#f8f8f2}.namespace{opacity:.7}.token.constant,.token.deleted,.token.property,.token.symbol,.token.tag{color:#f92672}.token.boolean,.token.number{color:#ae81ff}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#a6e22e}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url,.token.variable{color:#f8f8f2}.token.atrule,.token.attr-value,.token.class-name,.token.function{color:#e6db74}.token.keyword{color:#66d9ef}.token.important,.token.regex{color:#fd971f}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}</style><meta name="generator" content="Gatsby 2.17.11"/><style data-styled="dCzRad kjxiFM eTTOOa cqtcEs dtrllt jcMVzD hVndse kPWwoC fqAWfK cpxmEt kNdoOA kwxJmD fPFAAU cCnGrz ljZmaM jIILOS dRzjDQ srGm cExfIX cGKIiB hOulMx crUSHb gJKpus eJRfrc ikXmpD jgRRKj gjboot fmKyEC iQARob khEFYB gcjDgl" data-styled-version="4.4.1">
/* sc-component-id: sc-global-688532026 */
body{background:#F6F6F6;color:#535B60;} blockquote{border-left:5px solid #ccc;margin:0 0 1.666rem 0;padding:0 0 0 1.666rem;} img,svg{vertical-align:middle;} .gatsby-highlight{margin-bottom:1em;font-size:0.8em;}
/* sc-component-id: container__Root-k2zfab-0 */
.dCzRad{display:grid;background:white;grid-template-columns:auto [content-start] minmax(0px,1000px) [content-end] auto;}.kjxiFM{display:grid;background:#329BEB;grid-template-columns:auto [content-start] minmax(0px,1000px) [content-end] auto;}.eTTOOa{display:grid;background:none;grid-template-columns:auto [content-start] minmax(0px,708px) [content-end] auto;}.cqtcEs{display:grid;background:#2E3131;grid-template-columns:auto [content-start] minmax(0px,1000px) [content-end] auto;}
/* sc-component-id: container__Content-k2zfab-1 */
.dtrllt{grid-column:content-start / content-end;padding:0 14px;background:none;border-bottom:none;}.jcMVzD{grid-column:content-start / content-end;padding:0 14px;background:white;border-bottom:solid 5px #329BEB;box-shadow:2px 2px 5px 0px rgba(0,0,0,0.1);}
/* sc-component-id: icon__Svg-kox8q6-0 */
.khEFYB{fill:currentColor;width:24px;height:24px;}
/* sc-component-id: header__Root-e1q9gg-0 */
.ljZmaM{display:grid;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-content:center;-ms-flex-line-pack:center;align-content:center;justify-items:center;row-gap:10px;min-height:180px;color:white;}
/* sc-component-id: header__H1-e1q9gg-1 */
.jIILOS{font-size:1.5rem;text-align:center;max-width:600px;}
/* sc-component-id: social-links__Link-sc-1515j98-0 */
.iQARob{-webkit-transition:color 0.2s ease;transition:color 0.2s ease;} .iQARob,.iQARob:visited{color:currentColor;-webkit-text-decoration:none;text-decoration:none;} .iQARob:hover,.iQARob:focus,.iQARob:active{color:#329BEB;-webkit-text-decoration:none;text-decoration:none;}
/* sc-component-id: footer__Root-euf9xh-0 */
.gcjDgl{display:grid;grid-template-columns:repeat(4,auto);color:#535B60;padding:10px 0;text-align:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-column-gap:20px;column-gap:20px;}
/* sc-component-id: link__Link-nqexpt-0 */
.fPFAAU{cursor:pointer;-webkit-text-decoration:none;text-decoration:none;-webkit-transition:color 0.2s ease;transition:color 0.2s ease;} .fPFAAU,.fPFAAU:visited{color:currentColor;-webkit-text-decoration:none;text-decoration:none;} .fPFAAU:hover,.fPFAAU:focus,.fPFAAU:active{color:#329BEB;-webkit-text-decoration:none;text-decoration:none;}
/* sc-component-id: menu-button__Inner-sc-1tm41f6-0 */
.kNdoOA{position:absolute;background:currentColor;top:10px;height:5px;left:0;width:100%;-webkit-transition:opacity 200ms ease;transition:opacity 200ms ease;}
/* sc-component-id: menu-button__Root-sc-1tm41f6-1 */
.cpxmEt{position:relative;width:25px;height:25px;cursor:pointer;-webkit-tap-highlight-color:transparent;} .cpxmEt::before,.cpxmEt::after{display:block;position:absolute;background:currentColor;height:5px;left:0;width:100%;content:'';-webkit-transition:-webkit-transform 200ms ease,top 100ms ease 100ms;-webkit-transition:transform 200ms ease,top 100ms ease 100ms;transition:transform 200ms ease,top 100ms ease 100ms;} .cpxmEt::before{top:0;} .cpxmEt::after{top:20px;} .cpxmEt:hover,.cpxmEt:focus,.cpxmEt:active{color:#329BEB;}
/* sc-component-id: main-nav__Root-sc-1bwwfym-0 */
.hVndse{display:grid;grid:"logo burger" max-content "menu menu" max-content / max-content auto;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:14px 0 0 0;row-gap:14px;} @media (min-width:768px){.hVndse{grid: "logo menu" max-content / max-content auto;padding:10px 0;}}
/* sc-component-id: main-nav__Logo-sc-1bwwfym-1 */
.kPWwoC{cursor:pointer;-webkit-text-decoration:none;text-decoration:none;-webkit-transition:color 0.2s ease;transition:color 0.2s ease;grid-area:logo;} .kPWwoC,.kPWwoC:visited{color:currentColor;-webkit-text-decoration:none;text-decoration:none;} .kPWwoC:hover,.kPWwoC:focus,.kPWwoC:active{color:#329BEB;-webkit-text-decoration:none;text-decoration:none;}
/* sc-component-id: main-nav__Menu-sc-1bwwfym-2 */
.cCnGrz{display:none;grid-area:menu;justify-self:right;grid:1fr / auto-flow max-content;-webkit-column-gap:14px;column-gap:14px;} @media (min-width:768px){.cCnGrz{display:grid;}}
/* sc-component-id: main-nav__MobMenu-sc-1bwwfym-3 */
.kwxJmD{grid-area:menu;} @media (min-width:768px){.kwxJmD{display:none;}} .kwxJmD .ReactCollapse--content{display:grid;} .kwxJmD .ReactCollapse--collapse{-webkit-transition:height 500ms;transition:height 500ms;} .kwxJmD .link__Link-nqexpt-0:first-of-type{border-top:solid 1px #e4e4e4;} .kwxJmD .link__Link-nqexpt-0{padding:5px 0;}
/* sc-component-id: main-nav__MenuButtonStyled-sc-1bwwfym-4 */
.fqAWfK{grid-area:burger;justify-self:right;} @media (min-width:768px){.fqAWfK{display:none;}}
/* sc-component-id: photo__Root-sc-6agoi8-0 */
.ikXmpD{width:60px;height:60px;}
/* sc-component-id: written-by-card__Root-sc-1llalx5-0 */
.crUSHb{display:grid;-webkit-column-gap:20px;column-gap:20px;row-gap:5px;grid:"photo name" min-content "photo desc" min-content "photo social" min-content / 60px auto;padding:14px 0;}
/* sc-component-id: written-by-card__PhotoContainer-sc-1llalx5-1 */
.gJKpus{grid-area:photo;}
/* sc-component-id: written-by-card__PhotoWrap-sc-1llalx5-2 */
.eJRfrc{border-radius:50%;overflow:hidden;}
/* sc-component-id: written-by-card__Name-sc-1llalx5-3 */
.jgRRKj{grid-area:name;margin:0;font-size:1em;}
/* sc-component-id: written-by-card__Desc-sc-1llalx5-4 */
.gjboot{grid-area:desc;}
/* sc-component-id: written-by-card__Social-sc-1llalx5-5 */
.fmKyEC{grid-area:social;display:grid;-webkit-column-gap:16px;column-gap:16px;grid-auto-flow:column;grid-auto-columns:max-content;color:#A2B4C0;}
/* sc-component-id: full-container-row__FullContainerRow-q1qap8-0 */
.dRzjDQ{margin:0 -14px;}
/* sc-component-id: blog-page__Content-ol9peq-0 */
.cGKIiB{margin-top:10px;} .cGKIiB pre[class*="language-"]{margin:0 0 1.666rem 0;}
/* sc-component-id: blog-page__FeaturedImage-ol9peq-1 */
.srGm{margin:0;}
/* sc-component-id: blog-page__Header-ol9peq-2 */
.cExfIX{display:grid;-webkit-box-pack:left;-webkit-justify-content:left;-ms-flex-pack:left;justify-content:left;grid-auto-flow:column;-webkit-column-gap:10px;column-gap:10px;font-size:0.7em;margin-top:30px;}
/* sc-component-id: blog-page__WrittenByCardContainer-ol9peq-3 */
.hOulMx{margin-top:14px;}</style><style data-styled="hKhNDk ctRDSS cbRdiw" data-styled-version="4.4.1">
/* sc-component-id: layout__Root-sc-97uf4f-0 */
.hKhNDk{display:grid;grid-template-rows:max-content 1fr max-content;min-height:100vh;}
/* sc-component-id: layout__Content-sc-97uf4f-1 */
.cbRdiw{padding:14px 0;}</style><title data-react-helmet="true">Don’t let your RxJS observables die | nede.dev</title><meta data-react-helmet="true" name="description" content="Dev blog of Peter Ruttkay-Nedecký"/><meta data-react-helmet="true" property="og:title" content="Don’t let your RxJS observables die"/><meta data-react-helmet="true" property="og:description" content="Dev blog of Peter Ruttkay-Nedecký"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" property="og:url" content="https://nede.dev/blog/dont-let-your-rxjs-observables-die"/><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"/><meta data-react-helmet="true" name="twitter:creator" content="Peter Ruttkay-Nedecký"/><meta data-react-helmet="true" name="twitter:title" content="Don’t let your RxJS observables die"/><meta data-react-helmet="true" name="twitter:description" content="Dev blog of Peter Ruttkay-Nedecký"/><meta data-react-helmet="true" property="og:image" content="https://nede.dev/static/6d5f62800d58292c02885943e798127c/bc3a8/featured.jpg"/><meta data-react-helmet="true" name="twitter:image" content="https://nede.dev/static/6d5f62800d58292c02885943e798127c/bc3a8/featured.jpg"/><link rel="icon" href="/icons/icon-48x48.png?v=eaadd5fef0d3860ed6a6268f8c24fb6a"/><link rel="manifest" href="/manifest.webmanifest"/><meta name="theme-color" content="#2E3131"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=eaadd5fef0d3860ed6a6268f8c24fb6a"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=eaadd5fef0d3860ed6a6268f8c24fb6a"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=eaadd5fef0d3860ed6a6268f8c24fb6a"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=eaadd5fef0d3860ed6a6268f8c24fb6a"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=eaadd5fef0d3860ed6a6268f8c24fb6a"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=eaadd5fef0d3860ed6a6268f8c24fb6a"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=eaadd5fef0d3860ed6a6268f8c24fb6a"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=eaadd5fef0d3860ed6a6268f8c24fb6a"/><link href="https://fonts.googleapis.com/css?family=Roboto:400,700&amp;display=swap" rel="stylesheet"/><link as="script" rel="preload" href="/webpack-runtime-a3237bcda02ed62b2eac.js"/><link as="script" rel="preload" href="/styles-7ff825e96dfd35551199.js"/><link as="script" rel="preload" href="/app-ba66032cc1bb9e79c959.js"/><link as="script" rel="preload" href="/commons-acb33d995db0cd54915b.js"/><link as="script" rel="preload" href="/component---src-templates-blog-page-js-ed52f6250523f2a996d8.js"/><link as="fetch" rel="preload" href="/page-data\blog\dont-let-your-rxjs-observables-die\page-data.json" crossorigin="anonymous"/></head><body><noscript id="gatsby-noscript">This app works best with JavaScript enabled.</noscript><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="layout__Root-sc-97uf4f-0 hKhNDk"><div><div class="container__Root-k2zfab-0 dCzRad"><div class="container__Content-k2zfab-1 dtrllt"><nav class="main-nav__Root-sc-1bwwfym-0 hVndse"><a class="link__Link-nqexpt-0 main-nav__Logo-sc-1bwwfym-1 kPWwoC" href="/">nede.dev</a><div class="menu-button__Root-sc-1tm41f6-1 cpxmEt main-nav__MenuButtonStyled-sc-1bwwfym-4 fqAWfK" size="25"><div size="25" class="menu-button__Inner-sc-1tm41f6-0 kNdoOA"></div></div><div class="main-nav__MobMenu-sc-1bwwfym-3 kwxJmD"><div class="ReactCollapse--collapse" style="height:0px;overflow:hidden"><div class="ReactCollapse--content"><a class="link__Link-nqexpt-0 fPFAAU" href="/">blog</a><a class="link__Link-nqexpt-0 fPFAAU" href="/about-me">about me</a></div></div></div><div class="main-nav__Menu-sc-1bwwfym-2 cCnGrz"><a class="link__Link-nqexpt-0 fPFAAU" href="/">blog</a><a class="link__Link-nqexpt-0 fPFAAU" href="/about-me">about me</a></div></nav></div></div></div><article class="sc-bdVaJa ctRDSS"><div class="container__Root-k2zfab-0 kjxiFM"><div class="container__Content-k2zfab-1 dtrllt"><div class="header__Root-e1q9gg-0 ljZmaM"><h1 class="header__H1-e1q9gg-1 jIILOS">Don’t let your RxJS observables die</h1></div></div></div><div class="layout__Content-sc-97uf4f-1 cbRdiw"><div class="container__Root-k2zfab-0 eTTOOa"><div class="container__Content-k2zfab-1 jcMVzD"><div class="full-container-row__FullContainerRow-q1qap8-0 dRzjDQ"><figure class="blog-page__FeaturedImage-ol9peq-1 srGm"><div><div class=" gatsby-image-wrapper" style="position:relative;overflow:hidden"><div style="width:100%;padding-bottom:44.11764705882353%"></div><img src="data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAJABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAIEA//EABYBAQEBAAAAAAAAAAAAAAAAAAIAAf/aAAwDAQACEAMQAAABmeVmNyY2/8QAGRABAAIDAAAAAAAAAAAAAAAAAQACESAh/9oACAEBAAEFAuEqFpg0/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAGRAAAQUAAAAAAAAAAAAAAAAAABIgMkFx/9oACAEBAAY/ArJJ1v8A/8QAGhAAAgIDAAAAAAAAAAAAAAAAAAEQQRFhgf/aAAgBAQABPyFKzhGWoGwU/wD/2gAMAwEAAgADAAAAEM/v/8QAFhEBAQEAAAAAAAAAAAAAAAAAABEh/9oACAEDAQE/ELiv/8QAFxEAAwEAAAAAAAAAAAAAAAAAAAERIf/aAAgBAgEBPxCaRH//xAAcEAABAwUAAAAAAAAAAAAAAAAAASExEBFBUXH/2gAIAQEAAT8Qf3OhE1yVOpoSSMU//9k=" alt="featured" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><source srcset="/static/6d5f62800d58292c02885943e798127c/d278e/featured.jpg 200w,
/static/6d5f62800d58292c02885943e798127c/8539d/featured.jpg 400w,
/static/6d5f62800d58292c02885943e798127c/bc3a8/featured.jpg 800w,
/static/6d5f62800d58292c02885943e798127c/81ef8/featured.jpg 1200w,
/static/6d5f62800d58292c02885943e798127c/10fb1/featured.jpg 1360w" sizes="(max-width: 800px) 100vw, 800px" /><img loading="lazy" sizes="(max-width: 800px) 100vw, 800px" srcset="/static/6d5f62800d58292c02885943e798127c/d278e/featured.jpg 200w,
/static/6d5f62800d58292c02885943e798127c/8539d/featured.jpg 400w,
/static/6d5f62800d58292c02885943e798127c/bc3a8/featured.jpg 800w,
/static/6d5f62800d58292c02885943e798127c/81ef8/featured.jpg 1200w,
/static/6d5f62800d58292c02885943e798127c/10fb1/featured.jpg 1360w" src="/static/6d5f62800d58292c02885943e798127c/bc3a8/featured.jpg" alt="featured" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div></div><div><figcaption>Photo by <a href="https://unsplash.com/@rojekilian?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" target="blank" rel="noopener nofollow">Sarah Kilian</a> on <a href="https://unsplash.com/s/photos/error?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" target="blank" rel="noopener nofollow">Unsplash</a></figcaption></div></figure></div><div class="blog-page__Header-ol9peq-2 cExfIX"><span>October 10, 2021</span><span>|</span><span>7<!-- --> mins read</span></div><div class="blog-page__Content-ol9peq-0 cGKIiB"><p>RxJS is a powerful library for reactive programming. We use it in Angular all the time, from simple reactions to HTTP client responses to full-blown state management solutions. But sometimes, it is easy to miss some details and create a code that can break at the worst possible moment.
Therefore, we will dive into a few scenarios that you should remember when dealing with errors in RxJS observable executions.</p>
<!-- end -->
<h2>Keep it alive</h2>
<p>Let’s start with an example right away.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">of</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>
    <span class="token function">tap</span><span class="token punctuation">(</span><span class="token parameter">v</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>v <span class="token operator">===</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'some error'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    next<span class="token punctuation">:</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">'next:'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function-variable function">error</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">:</span> Error</span><span class="token punctuation">)</span> <span class="token operator">=></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'error:'</span><span class="token punctuation">,</span> err<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>We have an observable that emits numbers from 1 to 5, and if the number is 3, we throw an error.</p>
<p>We can see the following output.</p>
<div class="gatsby-highlight" data-language="sh"><pre class="language-sh"><code class="language-sh">next: 1
next: 2
error: some error</code></pre></div>
<p>Numbers 4 and 5 were not processed at all.</p>
<p>This might be surprising at the beginning, but if we check the RxJS <a href="https://rxjs.dev/guide/observable#executing-observables" target="_blank" rel="nofollow noopener">observable documentation</a>, we can find a clear definition of the observable contract as:</p>
<blockquote>
<p>In an Observable Execution, zero to infinite Next notifications may be delivered. If either an Error or Complete notification is delivered, then nothing else can be delivered afterwards.</p>
</blockquote>
<p>In our case, the execution has delivered an error for the third item, and thus it can not deliver any other notifications.</p>
<p>Let’s move into something more complex - we have routing in our application, and we want to build an Angular component that displays the current URL.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">this</span><span class="token punctuation">.</span>router<span class="token punctuation">.</span>events
  <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>
    <span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">event</span> <span class="token operator">=></span> event <span class="token keyword">instanceof</span> <span class="token class-name">NavigationEnd</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">tap</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">:</span> NavigationEnd</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">thisCanThrowAnError</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token function-variable function">next</span><span class="token punctuation">:</span> <span class="token parameter">e</span> <span class="token operator">=></span> <span class="token keyword">this</span><span class="token punctuation">.</span>currentPath <span class="token operator">=</span> e<span class="token punctuation">.</span>url<span class="token punctuation">,</span>
    error<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">notifyError</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>Here we subscribe to router events and use the tap operator to call a function that can potentially throw an error. If an error occurs, we show a notification. But as we already know, we will lose the subscription if an error is thrown. If we navigate to another route afterward, the displayed path won’t be updated anymore, and we would have to call the subscribe again.</p>
<p>So, how to handle this problem? One option would be to catch the exception right inside of the tap handler. You can imagine this would be a hassle because we would have to do it for each operator that can throw an error. Instead, we would like to handle it in one central place.</p>
<p>Luckily, RxJS has us covered, and we can use the <a href="https://rxjs.dev/api/operators/catchError" target="_blank" rel="nofollow noopener">catchError</a> operator. The catchError operator catches an error and enables us to handle it in some way. The vital thing to remember is that the catchError operator expects a new observable that will replace the old failed one. In our case, we would like to continue with the observable we already had, so all we have to do is return the observable sent to our handler after we display the error notification.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js">currentPath$ <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>router<span class="token punctuation">.</span>events
    <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>
    <span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">event</span> <span class="token operator">=></span> event <span class="token keyword">instanceof</span> <span class="token class-name">NavigationEnd</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">tap</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">:</span> NavigationEnd</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">thisCanThrowAnError</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">e</span> <span class="token operator">=></span> e<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">catchError</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> failedObservable</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">notifyError</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> failedObservable<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>As a side note, we are not handling the error inside of the observer anymore. Therefore we can leverage the Async pipe provided by Angular and remove the explicit subscribe.</p>
<p>One thing to remember, when an error occurs, the currentPath$ will not emit any value to the Async pipe for the URL that caused the error. Therefore we won’t see any update to the current path. The reason is that we are resubscribing to router events, and the last event has already been emitted and processed. We can prepend a fallback value to the observable returned from the catchError operator to solve this issue.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js">currentPath$ <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>router<span class="token punctuation">.</span>events
  <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>
    <span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">event</span> <span class="token operator">=></span> event <span class="token keyword">instanceof</span> <span class="token class-name">NavigationEnd</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">tap</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">:</span> NavigationEnd</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">thisCanThrowAnError</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">e</span> <span class="token operator">=></span> e<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">catchError</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> failedObservable</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">notifyError</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> failedObservable<span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">startWith</span><span class="token punctuation">(</span><span class="token string">'failed to retrieve'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>We will, in this case, display the message “failed to retrieve” instead of the old URL.</p>
<h2>Break the loop</h2>
<p>So far, so good, but we still have some caveats to explore.</p>
<p>Let’s return to our first example with the simple of observable and apply the same fix.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">of</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>
    <span class="token function">tap</span><span class="token punctuation">(</span><span class="token parameter">v</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>v <span class="token operator">===</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'some error'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">catchError</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> failedObservable</span><span class="token punctuation">)</span> <span class="token operator">=></span> failedObservable<span class="token punctuation">)</span>
  <span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>Do you see the problem? The catchError operator will resubscribe to the returned observable, and therefore the observable will emit all of its items again. We will fail on item 3 again, and we will also process the previous items multiple times.</p>
<p>In a more real-world case, this problem would occur if we use any kind of replay. Let’s rewrite the simple example using ReplySubject.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> subject <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ReplaySubject</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
subject
  <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>
    <span class="token function">tap</span><span class="token punctuation">(</span><span class="token parameter">v</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>v <span class="token operator">===</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'some error'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">catchError</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> failedObservable</span><span class="token punctuation">)</span> <span class="token operator">=></span> failedObservable<span class="token punctuation">)</span>
  <span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

subject<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
subject<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
subject<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
subject<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
subject<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>In this case, ‘3’ will be emitted again after the resubscribe in the catchError operator. The error in the tap operator will be therefore thrown again, resulting in an infinite loop. </p>
<p>How can we skip the failing item? The first idea could be to simply skip the failing item when returning the new observable from the catchError.<br>
Something like this.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js">failedObservable<span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">skip</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre></div>
<p>This will not work because failedObservable already contains the tap operator where the error occurs. We have added the skip operator after it, so it is too late. We can overcome this problem by moving the handling above the tap operator.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">let</span> lastValue<span class="token punctuation">;</span>
<span class="token keyword">const</span> subject <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ReplaySubject</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
subject
  <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>
    <span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">v</span> <span class="token operator">=></span> v <span class="token operator">!==</span> lastValue<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">tap</span><span class="token punctuation">(</span><span class="token parameter">v</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      lastValue <span class="token operator">=</span> v<span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>v <span class="token operator">===</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'some error'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">catchError</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> failedObservable</span><span class="token punctuation">)</span> <span class="token operator">=></span> failedObservable<span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

subject<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
subject<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
subject<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
subject<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
subject<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>This way, we successfully skipped the failing item. But let’s face it, it looks somehow ugly. We need another variable, and the RxJS pipeline is not neatly self-contained anymore.</p>
<p>Let’s try to go a step back.</p>
<p>Until now, we have been trying to keep the failing observable alive by retrying it. But what if we accept that it will become unsubscribed instead? We will prepare for it by creating another observable that we can sacrifice in the case of an error.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> subject <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ReplaySubject</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
subject
  <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>
    <span class="token function">mergeMap</span><span class="token punctuation">(</span><span class="token parameter">v</span> <span class="token operator">=></span>
      <span class="token keyword">of</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>
        <span class="token function">tap</span><span class="token punctuation">(</span><span class="token parameter">v</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>v <span class="token operator">===</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'some error'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token function">catchError</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token constant">EMPTY</span><span class="token punctuation">)</span>
      <span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

subject<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
subject<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
subject<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
subject<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
subject<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>In this case, we create another observable from the current value and flatten it using the mergeMap operator. We catch the error for item 3 inside the mergeMap operator as a part of the inner observable. We will cause the inner observable to complete by returning the EMPTY observable, but the important thing is that it will not end the outer observable.</p>
<h2>Service calls</h2>
<p>We could also apply this pattern to our example with the router.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js">currentPath$ <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>router<span class="token punctuation">.</span>events<span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>
    <span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">event</span> <span class="token operator">=></span> event <span class="token keyword">instanceof</span> <span class="token class-name">NavigationEnd</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">switchMap</span><span class="token punctuation">(</span><span class="token parameter">event</span> <span class="token operator">=></span>
      <span class="token keyword">of</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>
        <span class="token function">tap</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">:</span> NavigationEnd</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">thisCanThrowAnError</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">e</span> <span class="token operator">=></span> e<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token function">catchError</span><span class="token punctuation">(</span><span class="token parameter">err</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">notifyError</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">return</span> <span class="token keyword">of</span><span class="token punctuation">(</span><span class="token string">'failed to retrieve'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>Note that because we are not using any reply, it doesn’t make much sense to use the inner observable in this case. Still, it brings us closer to a real-world example - a back-end API call to retrieve some information as a reaction to an observable emission. </p>
<p>Let’s say that instead of getting some information from the activated route, we would like to call an API based on the current path. Such a call can fail anytime, e.g., because the API server is currently unavailable. Therefore we need to prepare for that case.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js">currentPath$ <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>router<span class="token punctuation">.</span>events
  <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>
    <span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">event</span> <span class="token operator">=></span> event <span class="token keyword">instanceof</span> <span class="token class-name">NavigationEnd</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">switchMap</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">:</span> NavigationEnd</span><span class="token punctuation">)</span> <span class="token operator">=></span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">someApiCallThatMightFail</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>
        <span class="token function">catchError</span><span class="token punctuation">(</span><span class="token parameter">err</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">notifyError</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">return</span> <span class="token keyword">of</span><span class="token punctuation">(</span><span class="token string">'failed to retrieve'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>We catch the potential error inside the switchMap operator, and thus we ensure that the error will not take down the whole observable execution.</p>
<h2>Conclusion</h2>
<p>We have looked into some cases that we should remember when dealing with a code that could throw an error in our observable execution.
Remember to catch errors correctly if you wish to keep the execution alive, and also beware of loops if you rethrow those errors.</p>
<p>You can find the example code with the router events <a href="https://stackblitz.com/edit/angular-rxjs-error-recovery" target="_blank" rel="nofollow noopener">here</a>:</p>
<p><a href="https://stackblitz.com/edit/angular-rxjs-error-recovery" target="_blank" rel="nofollow noopener"><div><iframe 
          height='600' 
          scrolling='no' 
          src='//stackblitz.com/edit/angular-rxjs-error-recovery?embed=1&view=preview' 
          frameborder='no' 
          allowtransparency='true' 
          allowfullscreen='true' 
          style='width: 100%;'></iframe></div></a></p></div></div></div><div class="container__Root-k2zfab-0 eTTOOa blog-page__WrittenByCardContainer-ol9peq-3 hOulMx"><div class="container__Content-k2zfab-1 jcMVzD"><aside class="written-by-card__Root-sc-1llalx5-0 crUSHb"><div class="written-by-card__PhotoContainer-sc-1llalx5-1 gJKpus"><div class="written-by-card__PhotoWrap-sc-1llalx5-2 eJRfrc"><div size="60" class="photo__Root-sc-6agoi8-0 ikXmpD"><div class=" gatsby-image-wrapper" style="position:relative;overflow:hidden"><div style="width:100%;padding-bottom:100%"></div><img src="data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAQFA//EABYBAQEBAAAAAAAAAAAAAAAAAAIBA//aAAwDAQACEAMQAAAB2Z++RLppik84xpDN/wD/xAAbEAACAgMBAAAAAAAAAAAAAAABAgADERIhMv/aAAgBAQABBQJzqqXEvv23wpzb2WMSzEyk5r//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/AR//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/AR//xAAbEAABBQEBAAAAAAAAAAAAAAAAAQIRITEQEv/aAAgBAQAGPwL0Q5sTl8UpMMLU0ST/xAAaEAEAAwEBAQAAAAAAAAAAAAABABEhQTFx/9oACAEBAAE/Ib57XCUT9haOm9m5KJturmlX1G6nyOptZEcrZ//aAAwDAQACAAMAAAAQs8dB/8QAGBEBAAMBAAAAAAAAAAAAAAAAAQAQETH/2gAIAQMBAT8QAStdhyf/xAAXEQADAQAAAAAAAAAAAAAAAAAAAREx/9oACAECAQE/EMYiKD0//8QAHRABAQACAwADAAAAAAAAAAAAAREAITFBcVGBkf/aAAgBAQABPxCQUm9j5h6YL0TcdZAVa+WGLX3lwZqSpzb+5WDVecfDjqtHhlp6BsTE3bRXl3n/2Q==" alt="Peter Ruttkay-Nedecký" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><source srcset="/static/166194e6dec062744af04bd87d339858/49de1/photo.jpg 225w,
/static/166194e6dec062744af04bd87d339858/f709c/photo.jpg 450w,
/static/166194e6dec062744af04bd87d339858/906d9/photo.jpg 864w" sizes="(max-width: 864px) 100vw, 864px" /><img loading="lazy" sizes="(max-width: 864px) 100vw, 864px" srcset="/static/166194e6dec062744af04bd87d339858/49de1/photo.jpg 225w,
/static/166194e6dec062744af04bd87d339858/f709c/photo.jpg 450w,
/static/166194e6dec062744af04bd87d339858/906d9/photo.jpg 864w" src="/static/166194e6dec062744af04bd87d339858/906d9/photo.jpg" alt="Peter Ruttkay-Nedecký" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div></div></div></div><h2 class="written-by-card__Name-sc-1llalx5-3 jgRRKj">Peter Ruttkay-Nedecký</h2><div class="written-by-card__Desc-sc-1llalx5-4 gjboot">I’m a passionate full-stack software engineer, technology lead, and architect.</div><div class="written-by-card__Social-sc-1llalx5-5 fmKyEC"><a href="https://twitter.com/PNedecky" target="blank" class="social-links__Link-sc-1515j98-0 iQARob" rel="noopener nofollow"><svg size="24" class="icon__Svg-kox8q6-0 khEFYB"><use xlink:href="#twitter"></use></svg></a><a href="https://github.com/pruttned" target="blank" class="social-links__Link-sc-1515j98-0 iQARob" rel="noopener nofollow"><svg size="24" class="icon__Svg-kox8q6-0 khEFYB"><use xlink:href="#github"></use></svg></a><a href="https://www.linkedin.com/in/peter-ruttkay-nedeck%C3%BD-69296bb3/" target="blank" class="social-links__Link-sc-1515j98-0 iQARob" rel="noopener nofollow"><svg size="24" class="icon__Svg-kox8q6-0 khEFYB"><use xlink:href="#linkedin"></use></svg></a></div></aside></div></div></div></article><div class="container__Root-k2zfab-0 cqtcEs"><div class="container__Content-k2zfab-1 dtrllt"><aside class="footer__Root-euf9xh-0 gcjDgl"><div>© <!-- -->Peter Ruttkay-Nedecký<!-- --> </div><a href="https://twitter.com/PNedecky" target="blank" class="social-links__Link-sc-1515j98-0 iQARob" rel="noopener nofollow"><svg size="24" class="icon__Svg-kox8q6-0 khEFYB"><use xlink:href="#twitter"></use></svg></a><a href="https://github.com/pruttned" target="blank" class="social-links__Link-sc-1515j98-0 iQARob" rel="noopener nofollow"><svg size="24" class="icon__Svg-kox8q6-0 khEFYB"><use xlink:href="#github"></use></svg></a><a href="https://www.linkedin.com/in/peter-ruttkay-nedeck%C3%BD-69296bb3/" target="blank" class="social-links__Link-sc-1515j98-0 iQARob" rel="noopener nofollow"><svg size="24" class="icon__Svg-kox8q6-0 khEFYB"><use xlink:href="#linkedin"></use></svg></a></aside></div></div></div></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/blog/dont-let-your-rxjs-observables-die";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-ba66032cc1bb9e79c959.js"],"component---src-templates-blog-page-js":["/component---src-templates-blog-page-js-ed52f6250523f2a996d8.js"],"component---src-pages-404-js":["/component---src-pages-404-js-6130ebc6ac92d5f3118d.js"],"component---src-pages-about-me-js":["/component---src-pages-about-me-js-cd825697aec60fec4511.js"],"component---src-pages-index-js":["/component---src-pages-index-js-5d939a8503f4b56bdbd1.js"]};/*]]>*/</script><script src="/component---src-templates-blog-page-js-ed52f6250523f2a996d8.js" async=""></script><script src="/commons-acb33d995db0cd54915b.js" async=""></script><script src="/app-ba66032cc1bb9e79c959.js" async=""></script><script src="/styles-7ff825e96dfd35551199.js" async=""></script><script src="/webpack-runtime-a3237bcda02ed62b2eac.js" async=""></script></body></html>